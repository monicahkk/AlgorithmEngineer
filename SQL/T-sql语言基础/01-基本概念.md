**DDL：data definition language**
数据定义语言 - 处理数据对象的定义，包括 create，alter，drop

**DML：data manipulation language**
数据处理语言：查询和修改数据 - select，insert，update，delete，merge

**DCL：data control language**
数据控制语言：权限管理，grant，revoke

集合论 + 谓词逻辑 -> 关系模型

**关系模型** - 命题，域，n元关系，n重元组，序偶
**命题，谓词和关系**：
- 数据库设计模型时，所有数据都是用关系来表示的
- 首先确定一个命题 proposition，用于表示数据库中要保存到信息
- 接下来对命题进行形式化 formalize 处理，从命题中分析出具体的数据（关系本身），并定义其结构（关系的标题）

**缺少的值**
**约束** -> 将数据完整性定义为模型的一部分，通过约束实施
- 是否允许空值（实施完整性）
- 提供实体完整性的候选键
- 提供引用完整性的外键

**规范化** -> 三范式
- 第一范式 - 1NF -> 行必唯一，属性是原子的
- 第二范式 - 2NF -> 满足1NF & 对于每个候选键，每个非键属性必须完全函数依赖于整个候选键
- 第三范式 - 3NF -> 满足2NF & 所有非键属性必须非传递依赖于候选键

**数据生命周期**：
[数据生命周期](D:\MyDocuments\Typora\sql\T-sql语言基础\数据生命周期.PNG)
- 联机事务处理：
    - 重点是数据输入，主要处理 - 插入，更新和删除数据
    - 关系型模型主要定位OLTP；不适合生成报表
- 数据仓库：
	- 专门针对数据检索和生成报表设计的环境
	- 服务于整个企业-数据仓库，服务于企业的一部分-数据集市
	- 最简单的设计 - 星形模式 - 具有冗余；规范化维度表 - 雪花型维度 - 雪花模式
	- 事实表 - 用户感兴趣的事实和度量
- ETL：从 源系统[OLTP] 抽取数据，对数据进行处理，并将数据加载到数据仓库的工具
- 联机分析处理：
    - 支持对聚会后的数据进行动态的在线分析
    - 预计算 - 关系数据仓库中计算和存储不同级别的聚合 - 编写一套复杂过程处理聚合的初始化和增量更新 / 使用专门的OLAP产品[SSAS] cube / MDX
- 数据挖掘
********
### 体系结构
- SQL Sever 实例：安装的一个SQL Sever数据库引擎/服务
- 数据库：各种对象的容器：表，视图，存储过程
	- master数据库保存SQL Sever势力范围内的元数据信息，服务器配置，实例中所有数据库的信息，初始化信息
	- Resource数据库用于保存所有系统对象
	- model数据库是新数据库的模板
	- tempbd数据库是SQL Sever 保存临时数据的地方，包括工作表，排序空间，行版本控制信息等；每次重新启动SQL Sever 实例，会删除此库内容，并重新创建为model的一个副本
	- msdb是成为SQL Sever Agent的一种服务保存其数据的地方。
		- SQL Sever Agent负责自动化处理，包括记录有关作业，计划和警报等实体；也负责复制的服务；
		- msdb还用于保存 SQL Sever 功能的信息
	- 数据库级别上定义 collation（排序规则），确定数据库中字符数据使用的排序规则（支持的语言，区分大小写，排序顺序）
	- 物理上由数据文件和事务日志文件组成（至少各一个），可同时写多个数据文件，只能顺序的写一个日志文件
		- 多个数据文件逻辑上按照文件组的形式分组管理 ；至少包含一个主文件组(PRIMARY，含主数据文件.mdf 和 数据库的系统目录 catalog，(可选)多个辅助数据文件.ndf secondary data file)；用户定义的文件组(可选)，只能包含辅助数据文件
        | | | |
        | :--: | :--: | :--: |
        |.mdf|Master Data File|主要数据文件|
        |.ldf|Log Data File|日志数据文件|
        |.ndf|Not Master Data File|非主要数据文件|
******
### 构架和对象
- 构架：
    - 各种对象的容器，表，视图，存储过程等
    - 控制对象的访问权限，考虑安全性
    - 命名空间，构架限定
    ```sql
    IF OBJECT_ID('dbo.Employees','U') IS NOT NULL
    	DROP TABLE dbo.Employees
    -- OBJECT_ID:检查当前数据库中是否已存在Employees表，存在则返回内部对象的ID，否则返回NULL
    -- 'U'代表用户表
    ```
- 创建表
- 定义数据完整性
	- 声明式(declarative)数据完整性：作为模型的一部分而实施（表定义的一部分）
		- 主键约束(Primary Key Constraints)
			1.行的唯一约束，不允许约束属性取NULL值
			2.为了实施逻辑主键约束的唯一约束，SQL Sever将在幕后创建一个唯一索引
				1.唯一索引是SQL Sever为了实施唯一约束而采用的一种物理机制
		- 唯一约束(Unique Constraints)
			1.保证数据行的一个列/一组列 数据的唯一，实现关系模型的替换键(alternate key)的概念
			2.一表可以有多个，不限于只定义在NOT NULL列上
			3.ANSI SQL支持两种类型的唯一约束：一为只允许在唯一约束列中有一个可以为NULL值，一为允许多个NULL值列，SQL SEVER只实现了前者
			4.SQL Sever将在幕后创建一个唯一索引
		- 外键约束
			1.用于实施引用完整性：引用表的一组属性上进行定义，并指向被引用表中的一组候选键（主键或唯一约束）
			2.目的为了将外键列允许的值域限制为被引用列中现有的值
			3.即使被引用的候选键列不存在NULL值，在外键列中也允许NULL值
				1. 禁止操作(no action)：引用表中存在相关的行，不可更新或删除被引用表中的行
				2. 定义具有级联操作的外键，用以补偿 —— ON DELETE 和 ON UPDATE 定义为 CASCADE(操作将被级联到引用表中相关的行),SET DEFAULT,SET NULL(相关行的外键属性分别设置为列的默认值或NULL值)
		- 检查约束(Check)
			1.在表中输入或修改一行数据之前必须满足的一个谓词
			2.增加 CHECK 和 POREIGN KEY 约束时，可以指定一个WITH NOCHECK选项，告诉RDBMS不必对现有的数据进行约束检查
			3. 也可以禁用或激活现有的 CHECK 和 POREIGN KEY 约束
		- 默认约束(Default)
			1.与特定的属性关联，当插入一行数据时，如果没有显示指定明确的值，可用默认表达式作为默认值 
	- 过程式(procedural)数据完整性：代码来实施的数据完整性（例：用存储过程或触发器）
	- CREATE TABLE 可定义约束；ALTER TABLE 可增加约束；除了DEFAULT约束以外，其他都可定义为组合约束